<div class="centered-toggle">
  <div class="toggle-container">
    <div class="toggle-option" [class.active]="isAddActive" (click)="toggleView()">ADD</div>
    <div class="toggle-option" [class.active]="!isAddActive" (click)="toggleView()">VIEW</div>
  </div>
  <button (click)="showAddForm = true" class="add-item-btn" *ngIf="isAddActive">+ Add Item</button>
</div>

<div class="table-section">
  <div class="filter-section" [ngClass]="{'hidden': isAddActive}">
    <div class="date-filter">
      <label for="fromDate">From:</label>
      <input type="date" id="fromDate" [(ngModel)]="fromDate" (change)="applyDateFilter()">
      <label for="toDate">To:</label>
      <input type="date" id="toDate" [(ngModel)]="toDate" (change)="applyDateFilter()">
    </div>
    <div class="download-section">
      <span class="download-title">Download:</span>
      <div class="download-buttons">
        <button>Custom Download</button>
        <button>All Time</button>
        <button>Month to Date</button>
        <button>Today</button>
      </div>
    </div>
  </div>
  <div class="product-info">
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Item</th>
            <th>Quantity</th>
            <th>Date Produced</th>
            <th>Expiration Date</th>
            <th *ngIf="isAddActive">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let record of isAddActive ? newProduceHistoryData : produceHistoryData">
            <td>{{ record.product.name || record.product }}</td>
            <td>{{ record.quantity }}</td>
            <td>{{ record.producedAt }}</td>
            <td>{{ record.expiresAt }}</td>
            <td *ngIf="isAddActive">
              <button class="edit-btn" (click)="editItem(record)">Edit</button>
              <button class="delete-btn" (click)="deleteItem(record)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="submit" [ngClass]="{'hidden': !isAddActive}">
  <button (click)="submitProduceHistory()">Submit</button>
</div>

<app-add-product-modal [showAddForm]="showAddForm" [productData]="productData" (closeAddForm)="showAddForm = false" (addProduct)="onSubmit($event)">
</app-add-product-modal>

<app-edit-product-modal [showEditForm]="showEditForm" [currentItem]="currentItem" [productData]="productData" (closeEditForm)="showEditForm = false" (updateProduct)="onUpdate($event)">
</app-edit-product-modal>

<app-delete-confirmation-modal [showDeleteConfirm]="showDeleteConfirm" (confirmDelete)="confirmDelete()" (cancelDelete)="cancelDelete()">
</app-delete-confirmation-modal>

<div *ngIf="showStatusModal" class="status-modal">
  <div class="status-content">
    <p>{{ statusMessage }}</p>
  </div>
</div>
