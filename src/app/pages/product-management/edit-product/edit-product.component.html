<div class="popup-backdrop" *ngIf="product">
  <div class="popup-modal">
    <div class="popup-content">
      <h2>Edit Product</h2>
      <form [formGroup]="editProductForm" (ngSubmit)="onSubmit()">
        <div>
          <label for="name">Name</label>
          <input formControlName="name" id="name" type="text" placeholder="Enter Product Name" />
          <div *ngIf="editProductForm.get('name')?.touched && editProductForm.get('name')?.invalid">
            <small class="error">Product Name is required</small>
          </div>
        </div>
        <div>
          <label for="category">Category</label>
          <select formControlName="category" id="category">
            <option value="" disabled>Select Category</option>
            <option *ngFor="let category of categories" [value]="category">{{ category | titlecase }}</option>
          </select>
          <div *ngIf="editProductForm.get('category')?.touched && editProductForm.get('category')?.invalid">
            <small class="error">Category is required</small>
          </div>
        </div>
        <div>
          <label for="price">Price (PHP)</label>
          <input id="price" formControlName="price" type="number" min="0" placeholder="Enter Price" />
          <div *ngIf="editProductForm.get('price')?.invalid && editProductForm.get('price')?.touched">
            <small class="error">Please enter a valid price (non-negative number).</small>
          </div>
        </div>
        <div *ngIf="editProductForm.errors?.['unchanged']">
          <small class="error">No changes detected in the form.</small>
        </div>
        <div class="button-group">
          <button type="submit" [disabled]="!editProductForm.valid">Update Product</button>
          <button type="button" (click)="openCancelModal()" class="cancel-btn">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>
<app-confirm-modal
  *ngIf="showModal"
  [message]="modalMessage"
  (confirmed)="onConfirmed($event)"
  (canceled)="onModalCancel()"
></app-confirm-modal>
